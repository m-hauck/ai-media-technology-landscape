"use strict";(()=>{function l(i){let e={};for(let[n,r]of Object.entries(i))typeof r=="string"?e[n]=r.trim():e[n]=r;return e}function s(){return new JSONEditor(document.getElementById("input-editor"),{required_by_default:!0,theme:"spectre",schema:{type:"object",properties:{name:{title:"Product name",type:"string",minLength:1},manufacturer:{title:"Manufacturer",type:"string",minLength:1},productAvailable:{title:"Product available?",type:"string",format:"radio",enum:["true","false"],options:{enum_titles:["Yes","No"]}},logo:{title:"File name of logo with file extension (vector graphics if possible; lowercase with underscores)",type:"string",minLength:1},link:{title:"Link to the product website (as specific as possible)",type:"string",minLength:1},mediatype:{title:"Product output",type:"array",minItems:1,uniqueItems:!0,items:{type:"string",enum:["video","audio","text","image","other"],options:{enum_titles:["Video","Audio","Text","Image","Other"]}}},description:{title:"Product description (short)",type:"string",minLength:1},technologyReadinessLevel:{title:"Technology-Readiness-Level",type:"string",format:"radio",enum:["basic-research","applied-research","first-applications","mass-production"],options:{enum_titles:["Basic research","Applied research","First applications","Mass production"]}},categories:{title:"Classification in value chain",type:"array",minItems:1,uniqueItems:!0,items:{type:"string",enum:["ProcurementContent","AcquisitionAdvertisement","ProductionContent","AdvertisementPlacement","Packaging","TechnicalProduction","Distribution"],options:{enum_titles:["Beschaffung von Informationen und Inhalten","Akquisition von Werbung","Produktion und Aggregation von Content","Platzierung von Werbung","Packaging der Produkte","Technische Produktion","Distribution"]}}},paymentModel:{title:"Payment model",type:"array",minItems:1,uniqueItems:!0,items:{type:"string",enum:["free","freemium","paid-once","paid-with-premium-extra","paid-periodically","contact-for-pricing"],options:{enum_titles:["Free","Free with premium extras (Freemium)","Paid once","Paid with premium extras","Paid periodically (subscription)","Contact for Pricing"]}}},companyLocation:{title:"Company headquarters (city or country)",type:"string",required:!1},funding:{title:"Funding (amount with currency)",type:"string",required:!1},revenuePerYear:{title:"Revenue per year (with currency)",type:"string",required:!1},notes:{title:"Notes",type:"string",required:!1}}}})}function d(i){if(i==null||i.parentNode==null)return;let e=i.parentNode.parentNode;e==null||e.parentNode==null||e.parentNode.removeChild(e)}function m(i,e){let n=JSON.parse(e.value);n.push(l(i));let r=JSON.stringify(n,null,4);e.value=r}function p(){let i=document.querySelector("#output-textarea").value,e=new Blob([i],{type:"text/plain"}),n=document.createElement("a");n.href=URL.createObjectURL(e);let r=new Date().toISOString().replace(/[-T:.Z]/g,"").slice(0,12);n.download=`products_${r.slice(0,8)}_${r.slice(8)}.json`,n.click(),URL.revokeObjectURL(n.href)}var o=s(),g=document.querySelector("#submit");g.addEventListener("click",()=>{let i=o.validate(),e=document.getElementById("valid_indicator");if(i.length){e.style.display="inherit";return}e.style.display="none";let n=document.querySelector("#output-table"),r=document.querySelector("#output-textarea"),t=o.getValue();m(t,r);let a=t.logo==null||t.logo==""?"":`<img src="img/${t.logo}">`;n.innerHTML+=`
        <tr>
            <td>${t.name}</td>
            <td>${t.manufacturer}</td>
            <td>${a}</td>
            <td><a href="${t.link} target="_blank">${t.link}</a></td>
            <td>${t.mediatype}</td>
            <td>${t.description}</td>
            <td>${t.technologyReadinessLevel}</td>
            <td>${t.paymentModel}</td>
            <td>${t.categories}</td>
            <td>${t.paymentModel}</td>
            <td>
            <!--<button class="delete">x</button>-->
        </tr>
        `;let c=document.querySelectorAll("table button.delete");for(let u of c)u.addEventListener("click",function(){d(this)});o.destroy(),o=s()});var y=document.querySelector("#download-button");y.addEventListener("click",()=>{p()});})();
